<div class="program-container" *ngIf="data; else spinnerContainer">
  <h1 class="heading__primary">Программа</h1>
</div>
<div class="table-container mat-elevation-z8" *ngIf="data; else spinnerContainer">
  <mat-table [dataSource]="table.sessions" *ngFor="let table of data; let i = index;">
    <ng-container [matColumnDef]="topic" *ngFor="let topic of table.topics ">
      <mat-header-cell class="headers__group"  *matHeaderCellDef>
        <h3 class="heading__theme">{{topic}}</h3>
      </mat-header-cell>
      <mat-cell *matCellDef="let element">
        <mat-card class="cell__item cell__item--clickable"
                  matRipple="0"
                  *ngIf="element[topic]?.organization"
                  (click)="showPerformance(element[topic].id)">
          <mat-card-header>
            <img mat-card-avatar [src]="element[topic]?.speaker?.photoUrl" alt="Фото" class="cell__item--avatar">
            <mat-card-title>{{element[topic]?.speaker?.name}}</mat-card-title>
            <mat-card-subtitle>{{element[topic].organization}}</mat-card-subtitle>
          </mat-card-header>
          <mat-card-content>
            <h3>{{element[topic].startTime | date : 'h:mm'}} - {{element[topic].endTime | date : 'h:mm'}}</h3>
            <p>{{element[topic].title}}</p>
          </mat-card-content>
        </mat-card>
      </mat-cell>
    </ng-container>

    <ng-container class="header__main" [matColumnDef]="table.date" >
      <mat-header-cell class="header__main" *matHeaderCellDef
          [attr.colspan]="2">{{table.date}}
      </mat-header-cell>
    </ng-container>

    <mat-header-row *matHeaderRowDef="[table.date]; sticky: true;"></mat-header-row>

    <mat-header-row *matHeaderRowDef="table.topics; sticky: true"></mat-header-row>
    <mat-row *matRowDef="let row; columns: table.topics;"></mat-row>

  </mat-table>
</div>
<ng-template #spinnerContainer>
  <mat-spinner></mat-spinner>
</ng-template>
