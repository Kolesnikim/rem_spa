<div class="program-container" *ngIf="newData; else spinnerContainer">
  <h1 class="heading__primary">Программа</h1>
</div>
<div class="table-container mat-elevation-z8" *ngIf="newData; else spinnerContainer">
  <mat-table [dataSource]="table.performances" *ngFor="let table of newData; let i = index;">
    <ng-container [matColumnDef]="themeAndRoom.theme" *ngFor="let themeAndRoom of table.themesAndRooms ">
      <mat-header-cell class="headers__group"  *matHeaderCellDef>
        <h3 class="heading__theme">{{themeAndRoom.theme}}</h3>
      </mat-header-cell>
      <mat-cell *matCellDef="let element">
        <mat-card class="cell__item cell__item--clickable" matRipple="0" (click)="showPerformance(element[themeAndRoom.theme].id)">
          <mat-card-header>
            <img mat-card-avatar src="assets/photo.jpg" alt="Avatar" class="cell__item--avatar">
            <mat-card-title>{{element[themeAndRoom.theme].name}}</mat-card-title>
            <mat-card-subtitle>{{element[themeAndRoom.theme].organization}}</mat-card-subtitle>
          </mat-card-header>
          <mat-card-content>
            <h3>{{element[themeAndRoom.theme].startDate}} - {{element[themeAndRoom.theme].endDate}}</h3>
            <p>{{element[themeAndRoom.theme].topic}}</p>
          </mat-card-content>
        </mat-card>
      </mat-cell>
    </ng-container>

    <ng-container class="header__main" [matColumnDef]="table.date" >
      <mat-header-cell class="header__main" *matHeaderCellDef
          [attr.colspan]="2">{{table.date}}
      </mat-header-cell>
    </ng-container>

    <mat-header-row *matHeaderRowDef="[table.date]; sticky: true;"></mat-header-row>

    <mat-header-row *matHeaderRowDef="extractTopics(table); sticky: true"></mat-header-row>
    <mat-row *matRowDef="let row; columns: extractTopics(table);"></mat-row>

  </mat-table>
</div>
<ng-template #spinnerContainer>
  <mat-spinner></mat-spinner>
</ng-template>
